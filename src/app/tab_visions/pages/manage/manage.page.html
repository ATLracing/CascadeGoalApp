<ion-header>
  <ion-toolbar>
    <ion-title>
      {{expanded_visions_[vision_index_]?.name}}
    </ion-title>

    <ion-buttons *ngIf="vision_index_ < expanded_visions_.length" slot="end">
      <ion-button (click)="toggle_set_to_week_mode()">
        <ion-icon slot="icon-only" name="calendar" color="{{send_to_week_color_string_}}"></ion-icon>
      </ion-button>
      <ion-button (click)="edit_vision()">
        <ion-icon slot="icon-only" name="create"></ion-icon>
      </ion-button>
      <ion-button (click)="open_settings()">
        <ion-icon slot="icon-only" name="cog"></ion-icon>
      </ion-button>
  </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-slides pager="true" [options]="slide_options_" (ionSlideDidChange)="slide_changed()">
    <ion-slide *ngFor="let expanded_vision of expanded_visions_; let vision_index = index">
      <!----------------------------------------------------------------------------------Content-->
      <ion-content>
        <!------------------------------------------------------------------------------Goal List-->
        <ion-list lines="none">
          <ion-item-divider>
            <ion-label>
              Goals
            </ion-label>
            <ion-buttons slot="end">
              <ion-button (click)="add_goal_to_vision(vision_index)">New Goal</ion-button>
            </ion-buttons>
          </ion-item-divider>

          <ion-grid *ngFor="let goal of expanded_vision.children; let goal_index = index">
            <goal-list-item [goal]="goal" [add_mode]="send_to_week_mode_"></goal-list-item>
          </ion-grid>
          <!------------------------------------------------------------------------------Divider-->
          <ion-item-divider>
            <ion-label>
              Tasks (directly-associated)
            </ion-label>
            <ion-buttons slot="end">
              <ion-button (click)="add_task_to_vision(vision_index)">New Task</ion-button>
            </ion-buttons>
          </ion-item-divider>
          <task-list-item *ngFor="let free_task of expanded_vision.extra.freestanding_tasks" [task]="free_task" [add_mode]="send_to_week_mode_"></task-list-item>
        </ion-list>
      </ion-content>
    </ion-slide>
    <ion-slide>
      <ion-button size="full" (click)="add_new_vision()">Add Vision</ion-button>
    </ion-slide>
  </ion-slides>
</ion-content>
